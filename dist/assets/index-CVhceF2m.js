import{r as j,j as e,L as ee,u as D,a as O,b as me,c as he,R as q,B as H,C as V,X as Y,Y as K,T as X,d as Z,e as se,f as G,g as J,h as ue,i as xe,k as pe,l as I,m as je}from"./vendor-phnsoXZN.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();function L({onMenuToggle:t,currentPage:s}){const[i,l]=j.useState(!1),o="National Energy Analytics & Forecasting System",n="NEAFS",r=s==="/neafs",[a,c]=j.useState(r);return e.jsxs("nav",{className:"top-nav",children:[e.jsxs("div",{className:"nav-left",children:[e.jsxs("button",{className:"menu-toggle",onClick:t,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("div",{className:"app-title-container",onClick:()=>c(!a),onMouseEnter:()=>c(!0),onMouseLeave:()=>!r&&c(!1),children:[e.jsx("h1",{className:"app-title",children:r||a?o:n}),a&&!r&&e.jsx("div",{className:"tooltip-arrow"})]})]}),e.jsxs("div",{className:"nav-right",children:[e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"Search..."})}),e.jsxs("div",{className:"nav-icons",children:[e.jsxs("button",{className:"icon-btn notification",children:[e.jsx("span",{className:"icon",children:"üîî"}),e.jsx("span",{className:"badge",children:"3"})]}),e.jsxs("div",{className:"profile-menu",children:[e.jsx("button",{className:"icon-btn profile",onClick:()=>l(!i),children:e.jsx("span",{className:"icon",children:"üë§"})}),i&&e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("a",{href:"#profile",children:"My Profile"}),e.jsx("a",{href:"#settings",children:"Settings"}),e.jsx("a",{href:"#help",children:"Help & Support"}),e.jsx("hr",{}),e.jsx("a",{href:"#logout",children:"Logout"})]})]})]})]})]})}function W({isOpen:t,open:s}){const[i,l]=j.useState(null),o=typeof t<"u"?t:s,n=[{icon:"üìä",label:"Dashboard",href:"/",submenu:null},{icon:"‚ö°",label:"NEAFS",fullName:"National Energy Analytics & Forecasting System",href:"/neafs",submenu:null},{icon:"üèõÔ∏è",label:"Energy Efficiency Rating",fullName:"Energy Efficiency Rating Prediction",href:"/energy-efficiency",submenu:null},{icon:"üîß",label:"EPC Impact Analysis",fullName:"EPC Impact Analysis & Energy Savings Forecasting",href:"/analytics/epc-analysis",submenu:null},{icon:"üè¢",label:"Building Classification",href:"/analytics/building-classification",submenu:null},{icon:"üìã",label:"Batch Compliance",fullName:"Batch Compliance Analysis",href:"/analytics/batch-compliance",submenu:null},{icon:"üîç",label:"Anomaly Detection",fullName:"Energy Anomaly Detector",href:"/analytics/anomaly-detection",submenu:null},{icon:"‚òÄÔ∏è",label:"Renewable Energy",fullName:"Renewable Energy Adoption Potential",href:"/analytics/renewable-energy",submenu:null}],r=a=>{l(i===a?null:a)};return e.jsxs("aside",{className:`side-nav ${o?"open":"closed"}`,children:[e.jsx("div",{className:"nav-header",children:e.jsx("h2",{children:"Menu"})}),e.jsx("ul",{className:"nav-menu",children:n.map((a,c)=>e.jsx("li",{className:"nav-item",children:a.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav-link submenu-trigger",onClick:()=>r(c),children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsx("span",{className:"nav-label",children:a.label}),e.jsx("span",{className:`submenu-icon ${i===c?"expanded":""}`,children:"‚ñº"})]}),i===c&&e.jsx("ul",{className:"submenu",children:a.submenu.map((v,h)=>e.jsx("li",{className:"submenu-item",children:e.jsx(ee,{to:v.href,className:"submenu-link",children:v.label})},h))})]}):a.href.startsWith("/")?e.jsxs(ee,{to:a.href,className:"nav-link",title:a.fullName||a.label,children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsx("span",{className:"nav-label",children:a.label})]}):e.jsxs("a",{href:a.href,className:"nav-link",title:a.fullName||a.label,children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsx("span",{className:"nav-label",children:a.label})]})},c))}),e.jsx("div",{className:"nav-footer",children:e.jsx("p",{children:"Energy App v1.0"})})]})}function ve(){const[t,s]=j.useState(!0),i=D(),l=()=>{s(!t)};return e.jsxs("div",{className:"home-container",children:[e.jsx(L,{onMenuToggle:l,currentPage:i.pathname}),e.jsx(W,{isOpen:t}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"content-wrapper",children:[e.jsx("h1",{children:"Welcome to Energy App"}),e.jsx("p",{children:"Manage and monitor your energy consumption efficiently"}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-icon",children:"‚ö°"}),e.jsx("h3",{children:"Current Usage"}),e.jsx("p",{className:"card-value",children:"2.4 kW"}),e.jsx("p",{className:"card-status",children:"24% above average"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-icon",children:"üí∞"}),e.jsx("h3",{children:"Monthly Cost"}),e.jsx("p",{className:"card-value",children:"R48.50"}),e.jsx("p",{className:"card-status",children:"Last 30 days"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-icon",children:"üìä"}),e.jsx("h3",{children:"Energy Saved"}),e.jsx("p",{className:"card-value",children:"15%"}),e.jsx("p",{className:"card-status",children:"This month"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-icon",children:"üå±"}),e.jsx("h3",{children:"Carbon Saved"}),e.jsx("p",{className:"card-value",children:"120 kg CO‚ÇÇ"}),e.jsx("p",{className:"card-status",children:"Equivalent to 1 tree"})]})]})]})})]})}const ge="LinearRegression",ae=["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","Northern Cape","North West","Western Cape"],ne=["Foreshore, Cape Town","Johannesburg","Durban","Bloemfontein"],ie=["E1","E2","E3","E4","E5"],le=["Private","Public"],ce=["Owned","Rented","Owner-Occupied"];function Ne({onPredict:t}){const[s,i]=j.useState({size_m2:1500,floors:10,grid_kwh:12e4,gas_kwh:5e4,renewable_kwh:1e4,province:"Dublin",city:"Dublin City",occupancy_type:"Commercial",entity_type:"Private",ownership_type:"Owner-Occupied"}),[l,o]=j.useState(!1),[n,r]=j.useState(null),a=h=>{const{name:x,value:d}=h.target;i(m=>({...m,[x]:isNaN(d)?d:parseFloat(d)})),r(null)},c=async h=>{var x,d;h.preventDefault(),o(!0),r(null);try{const m=[s.size_m2,s.floors,s.grid_kwh,s.gas_kwh,s.renewable_kwh],p=await O.post("https://13.49.72.166/api/predict",{features:m,model:"all"});t&&t({predictions:p.data.predictions,formData:s})}catch(m){r(((d=(x=m.response)==null?void 0:x.data)==null?void 0:d.error)||"Failed to get prediction. Make sure Flask backend is running."),console.error("Prediction error:",m)}finally{o(!1)}},v=()=>{const h=x=>x[Math.floor(Math.random()*x.length)];i({size_m2:Math.floor(Math.random()*7701)+300,floors:Math.floor(Math.random()*25)+1,grid_kwh:Math.floor(Math.random()*240001)+1e4,gas_kwh:Math.floor(Math.random()*150001)+0,renewable_kwh:Math.floor(Math.random()*100001)+0,province:h(ae),city:h(ne),occupancy_type:h(ie),entity_type:h(le),ownership_type:h(ce)})};return e.jsxs("div",{className:"prediction-form",children:[e.jsx("h2",{children:"üîã National Energy Analytics Platform"}),e.jsxs("p",{className:"best-model-label",children:["Best Model: ",e.jsx("span",{className:"best-model-tag",children:ge})]}),e.jsx("p",{className:"form-description",children:"Predict, benchmark, and analyze building energy performance."}),n&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),n]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üè¢ Building Characteristics"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Building Size (m¬≤)",e.jsx("span",{className:"input-value",children:s.size_m2.toLocaleString()})]}),e.jsx("input",{type:"range",name:"size_m2",min:"100",max:"10000",step:"50",value:s.size_m2,onChange:a})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Number of Floors",e.jsx("span",{className:"input-value",children:s.floors})]}),e.jsx("input",{type:"range",name:"floors",min:"1",max:"30",step:"1",value:s.floors,onChange:a})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"‚ö° Energy Sources"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Grid Energy (kWh)",e.jsx("span",{className:"input-value",children:s.grid_kwh.toLocaleString()})]}),e.jsx("input",{type:"range",name:"grid_kwh",min:"0",max:"300000",step:"5000",value:s.grid_kwh,onChange:a})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Gas Energy (kWh)",e.jsx("span",{className:"input-value",children:s.gas_kwh.toLocaleString()})]}),e.jsx("input",{type:"range",name:"gas_kwh",min:"0",max:"200000",step:"5000",value:s.gas_kwh,onChange:a})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Renewable Energy (kWh)",e.jsx("span",{className:"input-value",children:s.renewable_kwh.toLocaleString()})]}),e.jsx("input",{type:"range",name:"renewable_kwh",min:"0",max:"150000",step:"5000",value:s.renewable_kwh,onChange:a})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üìç Location"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Province"}),e.jsx("select",{name:"province",value:s.province,onChange:a,children:ae.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City"}),e.jsx("select",{name:"city",value:s.city,onChange:a,children:ne.map(h=>e.jsx("option",{value:h,children:h},h))})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üèõÔ∏è Building Type"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupancy Type"}),e.jsx("select",{name:"occupancy_type",value:s.occupancy_type,onChange:a,children:ie.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Entity Type"}),e.jsx("select",{name:"entity_type",value:s.entity_type,onChange:a,children:le.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ownership Type"}),e.jsx("select",{name:"ownership_type",value:s.ownership_type,onChange:a,children:ce.map(h=>e.jsx("option",{value:h,children:h},h))})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"‚è≥ Predicting...":"‚ñ∂ Predict & Analyze"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:v,disabled:l,children:"üé≤ Randomize Inputs"})]})]})]})}function ye({predictions:t,formData:s}){var b,N,A,T;if(!t||!t.predictions)return null;const i=t.predictions,l=s.grid_kwh+s.gas_kwh+s.renewable_kwh,o=l/s.size_m2,n=((b=i.ensemble_average)==null?void 0:b.prediction)||null,r=((N=i.random_forest)==null?void 0:N.prediction)||null,a=((A=i.xgboost)==null?void 0:A.prediction)||null,c=((T=i.linear_regression)==null?void 0:T.prediction)||null,v=120,h=o<=v,x=Math.abs(o-v),[d,m]=j.useState(null),[p,_]=j.useState(null);j.useEffect(()=>{let k=!0;async function C(){try{const w=[s.size_m2,s.floors,s.grid_kwh,s.gas_kwh,s.renewable_kwh],P=O.get("https://13.49.72.166/api/province-benchmark"),U=O.post("https://13.49.72.166/api/prediction-ci",{features:w}),[F,B]=await Promise.all([P,U]);if(!k)return;F.data&&F.data.success&&m(F.data),B.data&&B.data.success&&_(B.data)}catch(w){console.error("Benchmark/CI fetch error",w)}}return C(),()=>{k=!1}},[s]);const y=d?d.provinces.reduce((k,C,w)=>({...k,[C]:d.eui_kwh_m2[w]}),{}):{"Eastern Cape":65,"Free State":70,Gauteng:75,"KwaZulu-Natal":72,Limpopo:68,Mpumalanga:73,"Northern Cape":80,"North West":69,"Western Cape":60},S=y[s.province]??v,E=(p==null?void 0:p.prediction_kwh)||n||a||r||c||l,R=(p==null?void 0:p.ci_lower_kwh)||E*.9,f=(p==null?void 0:p.ci_upper_kwh)||E*1.1,u=({provinces:k,values:C,highlight:w})=>{const P=Math.max(...C,1),U=28,F=360,B=k.length*U,z=w&&C[k.indexOf(w)]?C[k.indexOf(w)]:null;return e.jsxs("svg",{width:"100%",viewBox:`0 0 ${F} ${B}`,preserveAspectRatio:"xMinYMid",children:[k.map(($,M)=>{const oe=(C[M]||0)/P*(F-120),de=M*U;return e.jsxs("g",{transform:`translate(0, ${de})`,children:[e.jsx("text",{x:8,y:18,fontSize:12,fill:"#374151",children:$}),e.jsx("rect",{x:120,y:6,rx:6,ry:6,width:F-136,height:12,fill:"#e5e7eb"}),e.jsx("rect",{x:120,y:6,rx:6,ry:6,width:oe,height:12,fill:$===w?"#f97316":"#7c3aed"})]},$)}),z!==null&&e.jsx("line",{x1:120+z/P*(F-136),x2:120+z/P*(F-136),y1:0,y2:B,stroke:"#ef4444",strokeDasharray:"4 4",strokeWidth:2,opacity:.9})]})},g=({lower:k,mean:C,upper:w})=>{const B=Math.min(k,C,w),z=Math.max(k,C,w),$=Math.max(z-B,1),M=Q=>28+(z-Q)/$*(160-28*2);return e.jsxs("svg",{width:"100%",viewBox:"0 0 140 160",preserveAspectRatio:"xMidYMid",children:[e.jsx("line",{x1:140/2,x2:140/2,y1:M(w),y2:M(k),stroke:"#374151",strokeWidth:2}),e.jsx("line",{x1:140/2-10,x2:140/2+10,y1:M(w),y2:M(w),stroke:"#374151",strokeWidth:2}),e.jsx("line",{x1:140/2-10,x2:140/2+10,y1:M(k),y2:M(k),stroke:"#374151",strokeWidth:2}),e.jsx("circle",{cx:140/2,cy:M(C),r:6,fill:"#3b82f6",stroke:"#1e3a8a",strokeWidth:1})]})};return e.jsxs("div",{className:"prediction-results",children:[e.jsx("h2",{children:"üìä Prediction Results & Analysis"}),e.jsxs("div",{className:"results-grid",children:[e.jsxs("div",{className:"result-card primary",children:[e.jsx("div",{className:"card-label",children:"Current Energy Usage"}),e.jsx("div",{className:"card-value",children:l.toLocaleString()}),e.jsx("div",{className:"card-unit",children:"kWh"})]}),e.jsxs("div",{className:"result-card",children:[e.jsx("div",{className:"card-label",children:"Energy Use Intensity (EUI)"}),e.jsx("div",{className:"card-value",children:o.toFixed(2)}),e.jsx("div",{className:"card-unit",children:"kWh/m¬≤"})]}),e.jsxs("div",{className:`result-card ${h?"success":"warning"}`,children:[e.jsx("div",{className:"card-label",children:"Efficiency Status"}),e.jsx("div",{className:"card-value",children:h?"‚úÖ Efficient":"‚ö†Ô∏è Inefficient"}),e.jsxs("div",{className:"card-unit",children:["Gap: ",x.toFixed(2)," kWh/m¬≤"]})]}),e.jsxs("div",{className:"result-card",children:[e.jsx("div",{className:"card-label",children:"National Benchmark"}),e.jsx("div",{className:"card-value",children:v}),e.jsx("div",{className:"card-unit",children:"kWh/m¬≤"})]})]}),e.jsxs("div",{className:"predictions-section",children:[e.jsx("h3",{children:"ü§ñ Model Predictions"}),e.jsxs("div",{className:"models-grid",children:[n&&e.jsxs("div",{className:"model-card featured",children:[e.jsx("div",{className:"model-type",children:"Ensemble Average"}),e.jsx("div",{className:"model-value",children:n.toLocaleString("en-US",{maximumFractionDigits:2})}),e.jsx("div",{className:"model-unit",children:"kWh"}),e.jsx("div",{className:"model-badge",children:"Recommended"})]}),a&&e.jsxs("div",{className:"model-card",children:[e.jsx("div",{className:"model-type",children:"XGBoost"}),e.jsx("div",{className:"model-value",children:a.toLocaleString("en-US",{maximumFractionDigits:2})}),e.jsx("div",{className:"model-unit",children:"kWh"}),e.jsx("div",{className:"model-info",children:"Best accuracy"})]}),r&&e.jsxs("div",{className:"model-card",children:[e.jsx("div",{className:"model-type",children:"Random Forest"}),e.jsx("div",{className:"model-value",children:r.toLocaleString("en-US",{maximumFractionDigits:2})}),e.jsx("div",{className:"model-unit",children:"kWh"}),e.jsx("div",{className:"model-info",children:"High accuracy"})]}),c&&e.jsxs("div",{className:"model-card",children:[e.jsx("div",{className:"model-type",children:"Linear Regression"}),e.jsx("div",{className:"model-value",children:c.toLocaleString("en-US",{maximumFractionDigits:2})}),e.jsx("div",{className:"model-unit",children:"kWh"}),e.jsx("div",{className:"model-info",children:"Baseline"})]})]})]}),e.jsxs("div",{className:"energy-section",children:[e.jsx("h3",{children:"‚ö° Energy Mix Breakdown"}),e.jsxs("div",{className:"energy-breakdown",children:[e.jsxs("div",{className:"energy-source",children:[e.jsx("div",{className:"source-label",children:"Grid Energy"}),e.jsx("div",{className:"source-value",children:s.grid_kwh.toLocaleString()}),e.jsx("div",{className:"source-unit",children:"kWh"}),e.jsxs("div",{className:"source-percentage",children:[(s.grid_kwh/l*100).toFixed(1),"%"]}),e.jsx("div",{className:"source-bar",children:e.jsx("div",{className:"bar-fill grid",style:{width:`${s.grid_kwh/l*100}%`}})})]}),e.jsxs("div",{className:"energy-source",children:[e.jsx("div",{className:"source-label",children:"Gas Energy"}),e.jsx("div",{className:"source-value",children:s.gas_kwh.toLocaleString()}),e.jsx("div",{className:"source-unit",children:"kWh"}),e.jsxs("div",{className:"source-percentage",children:[(s.gas_kwh/l*100).toFixed(1),"%"]}),e.jsx("div",{className:"source-bar",children:e.jsx("div",{className:"bar-fill gas",style:{width:`${s.gas_kwh/l*100}%`}})})]}),e.jsxs("div",{className:"energy-source",children:[e.jsx("div",{className:"source-label",children:"Renewable Energy"}),e.jsx("div",{className:"source-value",children:s.renewable_kwh.toLocaleString()}),e.jsx("div",{className:"source-unit",children:"kWh"}),e.jsxs("div",{className:"source-percentage",children:[(s.renewable_kwh/l*100).toFixed(1),"%"]}),e.jsx("div",{className:"source-bar",children:e.jsx("div",{className:"bar-fill renewable",style:{width:`${s.renewable_kwh/l*100}%`}})})]})]})]}),e.jsxs("div",{className:"benchmark-section",children:[e.jsx("h3",{children:"üìä Benchmark & Confidence"}),e.jsxs("div",{className:"benchmark-grid",children:[e.jsxs("div",{className:"benchmark-card",children:[e.jsx("div",{className:"benchmark-title",children:"Province Benchmark"}),e.jsx("p",{className:"benchmark-description",children:"Compare your building's energy use intensity (EUI) against typical values for the selected province."}),e.jsxs("div",{className:"benchmark-chart",children:[e.jsxs("div",{className:"benchmark-row",children:[e.jsx("span",{className:"benchmark-label",children:"Predicted EUI"}),e.jsxs("span",{className:"benchmark-value",children:[o.toFixed(2)," kWh/m¬≤"]})]}),e.jsx(u,{provinces:Object.keys(y),values:Object.keys(y).map(k=>y[k]),highlight:s.province}),e.jsx("div",{style:{height:8}}),e.jsxs("div",{className:"benchmark-row",children:[e.jsx("span",{className:"benchmark-label",children:"Province Benchmark"}),e.jsxs("span",{className:"benchmark-value",children:[S.toFixed(2)," kWh/m¬≤"]})]})]})]}),e.jsxs("div",{className:"benchmark-card",children:[e.jsx("div",{className:"benchmark-title",children:"Prediction Confidence"}),e.jsx("p",{className:"benchmark-description",children:"Visualize the prediction with an uncertainty band (confidence interval) around the estimated annual energy consumption."}),e.jsxs("div",{className:"benchmark-chart",children:[e.jsxs("div",{className:"benchmark-row",children:[e.jsx("span",{className:"benchmark-label",children:"Predicted Energy"}),e.jsxs("span",{className:"benchmark-value",children:[E.toLocaleString("en-US",{maximumFractionDigits:0})," ","kWh"]})]}),e.jsx("div",{className:"benchmark-bar-track ci-track",style:{height:160},children:e.jsx(g,{lower:R,mean:E,upper:f})}),e.jsx("div",{className:"benchmark-row benchmark-ci-text",children:e.jsxs("span",{children:["~ ",Number(R).toLocaleString("en-US",{maximumFractionDigits:0})," ‚Äì"," ",Number(f).toLocaleString("en-US",{maximumFractionDigits:0})," kWh"]})})]})]})]})]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:"üè¢ Building Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Size:"}),e.jsxs("span",{className:"info-value",children:[s.size_m2," m¬≤"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Floors:"}),e.jsx("span",{className:"info-value",children:s.floors})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Province:"}),e.jsx("span",{className:"info-value",children:s.province})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"City:"}),e.jsx("span",{className:"info-value",children:s.city})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Occupancy Type:"}),e.jsx("span",{className:"info-value",children:s.occupancy_type})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Entity Type:"}),e.jsx("span",{className:"info-value",children:s.entity_type})]})]})]}),e.jsxs("div",{className:"recommendations-section",children:[e.jsx("h3",{children:"üí° Recommendations"}),e.jsx("div",{className:"recommendations",children:h?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"recommendation success",children:[e.jsx("span",{className:"rec-icon",children:"‚úÖ"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Energy Efficient Building"}),e.jsx("p",{children:"Your building's EUI is below the national benchmark. Maintain current practices."})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"recommendation warning",children:[e.jsx("span",{className:"rec-icon",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Energy Optimization Needed"}),e.jsxs("p",{children:["Your building's EUI exceeds the national benchmark by ",x.toFixed(2)," kWh/m¬≤."]})]})]}),e.jsxs("div",{className:"recommendation info",children:[e.jsx("span",{className:"rec-icon",children:"üí°"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Increase Renewable Energy Usage"}),e.jsx("p",{children:"Consider increasing renewable energy sources to reduce overall consumption and carbon footprint."})]})]}),e.jsxs("div",{className:"recommendation info",children:[e.jsx("span",{className:"rec-icon",children:"üí°"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Energy Audit"}),e.jsx("p",{children:"Conduct an energy audit to identify inefficiencies in HVAC, lighting, and equipment systems."})]})]})]})})]})]})}function fe(){const[t,s]=j.useState(!0),[i,l]=j.useState(null),o=D(),n=()=>{s(!t)},r=a=>{l(a),setTimeout(()=>{const c=document.getElementById("results-section");c&&c.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"neafs-main-container",children:[e.jsx(L,{onMenuToggle:n,currentPage:o.pathname}),e.jsx(W,{isOpen:t}),e.jsx("main",{className:"neafs-main-content",children:e.jsx("div",{className:"neafs-centered-container",children:e.jsxs("section",{className:"prediction-section",children:[e.jsx(Ne,{onPredict:r}),i&&e.jsx("div",{id:"results-section",children:e.jsx(ye,{predictions:i,formData:i.formData})})]})})})]})}function re({onClassify:t,onBatchDataLoaded:s,batchModeOnly:i=!1}){const[l,o]=j.useState(i?"batch":"single"),[n,r]=j.useState({entity_type:"Private",ownership_type:"owned",billing_type:"monthly",metering_type:"prepaid",province:"Dublin",size:2,floors:5,grid_kwh:1200,gas_kwh:200,renewable_kwh:50,liquid_kwh:0,solid_kwh:0,other_kwh:0}),[a,c]=j.useState(!1),[v,h]=j.useState(""),[x,d]=j.useState(!1),[m,p]=j.useState(""),_=f=>{const{name:u,value:g,type:b}=f.target;r(N=>({...N,[u]:b==="number"?g===""?0:parseFloat(g):g})),h("")},y=(f,u)=>{r(g=>({...g,[f]:u})),h("")},S=async f=>{var u,g;f.preventDefault(),c(!0),h("");try{const b=await O.post("https://13.49.72.166/api/classify",{entity_type:n.entity_type,ownership_type:n.ownership_type,billing_type:n.billing_type,metering_type:n.metering_type,province:n.province,size:n.size,floors:n.floors,grid:n.grid_kwh,gas:n.gas_kwh,renewable:n.renewable_kwh,liquid:n.liquid_kwh,solid:n.solid_kwh,other:n.other_kwh});t({classification:b.data.classification,probabilities:b.data.probabilities,formData:n})}catch(b){h(((g=(u=b.response)==null?void 0:u.data)==null?void 0:g.error)||"Error during classification. Please try again."),console.error("Classification error:",b)}finally{c(!1)}},E=()=>{r({entity_type:Math.random()>.5?"Private":"Public",ownership_type:Math.random()>.5?"owned":"rented",billing_type:Math.random()>.5?"monthly":"quarterly",metering_type:Math.random()>.5?"prepaid":"postpaid",province:["Dublin","Cork","Galway","Limerick","Waterford"][Math.floor(Math.random()*5)],size:Math.floor(Math.random()*3)+1,floors:Math.floor(Math.random()*10)+1,grid_kwh:Math.floor(Math.random()*5e3)+500,gas_kwh:Math.floor(Math.random()*3e3),renewable_kwh:Math.floor(Math.random()*2e3),liquid_kwh:Math.floor(Math.random()*1e3),solid_kwh:Math.floor(Math.random()*1e3),other_kwh:Math.floor(Math.random()*500)}),h("")},R=f=>{const{files:u}=f.target;if(u.length!==2){p("‚ö†Ô∏è Please upload exactly 2 files: NBEPR + EPC");return}d(!0),p("Processing files...");let g=null,b=null,N=0;Array.from(u).forEach(A=>{const T=new FileReader;T.onload=k=>{try{const C=me(k.target.result,{type:"binary"}),w=C.SheetNames[0],P=he.sheet_to_json(C.Sheets[w]);A.name.toLowerCase().includes("nbepr")?g=P:A.name.toLowerCase().includes("epc")&&(b=P),N++,N===2&&g&&b&&(s({registry:g,epc:b}),p("‚úÖ Files loaded successfully!"),d(!1))}catch(C){p(`‚ùå Error reading file: ${C.message}`),d(!1)}},T.readAsBinaryString(A)})};return e.jsxs("div",{className:"bc-form",children:[!i&&e.jsxs("div",{className:"bc-tab-navigation",children:[e.jsx("button",{className:`bc-tab ${l==="single"?"active":""}`,onClick:()=>o("single"),children:"Single Building"}),e.jsx("button",{className:`bc-tab ${l==="batch"?"active":""}`,onClick:()=>o("batch"),children:"Batch Compliance Analysis"})]}),l==="single"&&!i?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"üè¢ Building Occupancy Classifier"}),e.jsx("p",{className:"form-description",children:"Enter building details to predict occupancy classification based on energy patterns."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"üìä Building Compliance & Risk Analysis"}),e.jsx("p",{className:"form-description",children:"Upload NBEPR and EPC datasets to analyze compliance and calculate risk scores."})]}),l==="single"&&v&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),v]}),l==="batch"?e.jsx("div",{className:"bc-batch-upload",children:e.jsxs("div",{className:"bc-upload-box",children:[e.jsx("div",{className:"bc-upload-icon",children:"üìÅ"}),e.jsx("p",{children:"Upload both compliance files to begin analysis"}),e.jsxs("label",{htmlFor:"batch-file-input",className:"bc-file-input-label",children:[e.jsx("input",{id:"batch-file-input",type:"file",multiple:!0,accept:".xlsx,.xls",onChange:R,disabled:x,style:{display:"none"}}),e.jsx("span",{className:"bc-upload-btn",children:x?"Processing...":"Select Files (NBEPR + EPC)"})]}),e.jsxs("div",{className:"bc-file-requirements",children:[e.jsx("p",{children:e.jsx("strong",{children:"Required Files:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Building Registered on the NBEPR.xlsx"}),e.jsx("li",{children:"Building Issued with EPCs.xlsx"})]})]}),m&&e.jsx("div",{className:`bc-status-message ${m.includes("‚úÖ")?"success":"error"}`,children:m})]})}):e.jsxs("form",{onSubmit:S,className:"bc-form-container",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üè¢ Building Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Entity Type"}),e.jsxs("select",{name:"entity_type",value:n.entity_type,onChange:_,children:[e.jsx("option",{children:"Private"}),e.jsx("option",{children:"Public"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ownership Type"}),e.jsxs("select",{name:"ownership_type",value:n.ownership_type,onChange:_,children:[e.jsx("option",{value:"owned",children:"Owned"}),e.jsx("option",{value:"rented",children:"Rented"})]})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üìä Metering & Billing"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Billing Type"}),e.jsxs("select",{name:"billing_type",value:n.billing_type,onChange:_,children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Metering Type"}),e.jsxs("select",{name:"metering_type",value:n.metering_type,onChange:_,children:[e.jsx("option",{value:"prepaid",children:"Prepaid"}),e.jsx("option",{value:"postpaid",children:"Postpaid"})]})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üìç Location"}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Province"}),e.jsx("input",{type:"text",name:"province",value:n.province,onChange:_,placeholder:"e.g., Dublin"})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üìê Physical Characteristics"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Size",e.jsx("span",{className:"input-value",children:["Small","Medium","Large"][n.size-1]})]}),e.jsx("input",{type:"range",name:"size",min:"1",max:"3",step:"1",value:n.size,onChange:f=>y("size",parseInt(f.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Floors",e.jsxs("span",{className:"input-value",children:[n.floors," floors"]})]}),e.jsx("input",{type:"range",name:"floors",min:"1",max:"20",step:"1",value:n.floors,onChange:f=>y("floors",parseInt(f.target.value))})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"‚ö° Energy Consumption (kWh)"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Grid Energy",e.jsxs("span",{className:"input-value",children:[n.grid_kwh," kWh"]})]}),e.jsx("input",{type:"range",name:"grid_kwh",min:"0",max:"10000",step:"100",value:n.grid_kwh,onChange:f=>y("grid_kwh",parseInt(f.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Gas Energy",e.jsxs("span",{className:"input-value",children:[n.gas_kwh," kWh"]})]}),e.jsx("input",{type:"range",name:"gas_kwh",min:"0",max:"5000",step:"100",value:n.gas_kwh,onChange:f=>y("gas_kwh",parseInt(f.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Renewable Energy",e.jsxs("span",{className:"input-value",children:[n.renewable_kwh," kWh"]})]}),e.jsx("input",{type:"range",name:"renewable_kwh",min:"0",max:"3000",step:"100",value:n.renewable_kwh,onChange:f=>y("renewable_kwh",parseInt(f.target.value))})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Liquid Fuel",e.jsxs("span",{className:"input-value",children:[n.liquid_kwh," kWh"]})]}),e.jsx("input",{type:"range",name:"liquid_kwh",min:"0",max:"2000",step:"100",value:n.liquid_kwh,onChange:f=>y("liquid_kwh",parseInt(f.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Solid Fuel",e.jsxs("span",{className:"input-value",children:[n.solid_kwh," kWh"]})]}),e.jsx("input",{type:"range",name:"solid_kwh",min:"0",max:"2000",step:"100",value:n.solid_kwh,onChange:f=>y("solid_kwh",parseInt(f.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Other Energy",e.jsxs("span",{className:"input-value",children:[n.other_kwh," kWh"]})]}),e.jsx("input",{type:"range",name:"other_kwh",min:"0",max:"1000",step:"100",value:n.other_kwh,onChange:f=>y("other_kwh",parseInt(f.target.value))})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"‚è≥ Classifying...":"‚ñ∂ Classify Building"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:E,disabled:a,children:"üé≤ Randomize Inputs"})]})]})]})}function te(t){const{classification:s,probabilities:i,formData:l,registryData:o,epcData:n}=t;if(o&&n)return e.jsx(be,{registryData:o,epcData:n});if(!s)return null;const[a,c]=j.useState("predictions"),v=Object.entries(i||{}).sort(([,x],[,d])=>d-x),h=x=>{c(a===x?null:x)};return e.jsxs("div",{className:"classification-results",children:[e.jsx("h2",{children:"üìä Single Building Classification Results"}),e.jsxs("div",{className:"result-cards-grid",children:[e.jsxs("div",{className:"result-card primary",children:[e.jsx("div",{className:"card-label",children:"Predicted Classification"}),e.jsx("div",{className:"card-value",children:s}),e.jsx("div",{className:"card-unit",children:"Building Occupancy Type"})]}),e.jsxs("div",{className:"result-card success",children:[e.jsx("div",{className:"card-label",children:"Confidence"}),e.jsxs("div",{className:"card-value",children:[i[s]?(i[s]*100).toFixed(1):"N/A","%"]}),e.jsx("div",{className:"card-unit",children:"Prediction Confidence"})]})]}),e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header",onClick:()=>h("predictions"),children:[e.jsx("h3",{children:"üéØ Probability Distribution"}),e.jsx("span",{className:"expand-icon",children:a==="predictions"?"‚ñº":"‚ñ∂"})]}),a==="predictions"&&e.jsx("div",{className:"section-content",children:e.jsx("div",{className:"probability-bars",children:v.map(([x,d])=>e.jsxs("div",{className:"probability-item",children:[e.jsx("span",{className:"class-label",children:x}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${d*100}%`}})}),e.jsxs("span",{className:"probability-value",children:[(d*100).toFixed(1),"%"]})]},x))})})]}),e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header",onClick:()=>h("building"),children:[e.jsx("h3",{children:"üè¢ Building Information"}),e.jsx("span",{className:"expand-icon",children:a==="building"?"‚ñº":"‚ñ∂"})]}),a==="building"&&e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Entity Type"}),e.jsx("span",{className:"info-value",children:l.entity_type})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Ownership Type"}),e.jsx("span",{className:"info-value",children:l.ownership_type})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Billing Type"}),e.jsx("span",{className:"info-value",children:l.billing_type})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Metering Type"}),e.jsx("span",{className:"info-value",children:l.metering_type})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Province"}),e.jsx("span",{className:"info-value",children:l.province})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Size"}),e.jsx("span",{className:"info-value",children:["Small","Medium","Large"][l.size-1]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Number of Floors"}),e.jsx("span",{className:"info-value",children:l.floors})]})]})})]}),e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header",onClick:()=>h("energy"),children:[e.jsx("h3",{children:"‚ö° Energy Consumption Breakdown"}),e.jsx("span",{className:"expand-icon",children:a==="energy"?"‚ñº":"‚ñ∂"})]}),a==="energy"&&e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"energy-breakdown",children:[e.jsxs("div",{className:"energy-item",children:[e.jsx("span",{className:"energy-label",children:"Grid Energy"}),e.jsxs("span",{className:"energy-value",children:[l.grid_kwh," kWh"]})]}),e.jsxs("div",{className:"energy-item",children:[e.jsx("span",{className:"energy-label",children:"Gas Energy"}),e.jsxs("span",{className:"energy-value",children:[l.gas_kwh," kWh"]})]}),e.jsxs("div",{className:"energy-item",children:[e.jsx("span",{className:"energy-label",children:"Renewable Energy"}),e.jsxs("span",{className:"energy-value",children:[l.renewable_kwh," kWh"]})]}),e.jsxs("div",{className:"energy-item",children:[e.jsx("span",{className:"energy-label",children:"Liquid Fuel"}),e.jsxs("span",{className:"energy-value",children:[l.liquid_kwh," kWh"]})]}),e.jsxs("div",{className:"energy-item",children:[e.jsx("span",{className:"energy-label",children:"Solid Fuel"}),e.jsxs("span",{className:"energy-value",children:[l.solid_kwh," kWh"]})]}),e.jsxs("div",{className:"energy-item",children:[e.jsx("span",{className:"energy-label",children:"Other Energy"}),e.jsxs("span",{className:"energy-value",children:[l.other_kwh," kWh"]})]})]}),e.jsxs("div",{className:"total-energy",children:[e.jsx("strong",{children:"Total Energy:"})," ",l.grid_kwh+l.gas_kwh+l.renewable_kwh+l.liquid_kwh+l.solid_kwh+l.other_kwh," kWh"]})]})]})]})}function be({registryData:t,epcData:s}){const[i,l]=j.useState(null),[o,n]=j.useState([]),[r,a]=j.useState(""),[c,v]=j.useState("ALL"),[h,x]=j.useState("ALL"),d=u=>u?String(u).trim().toLowerCase():"",m=u=>{try{return parseFloat(u)}catch{return NaN}},p=u=>{let g=0;u.compliance_status&&u.compliance_status.includes("NON")&&(g+=50),u.floors_num>=10?g+=15:u.floors_num>=5?g+=10:u.floors_num>=2&&(g+=5),u["Grid Usage"]>0&&(g+=10);let b=0;u["Gas Usage"]>0&&b++,u["Liquid Fuel Usage"]>0&&b++,u["Solid Fuel Usage"]>0&&b++,g+=b*5,u.smart_metered_flag||(g+=10);const N=String(u["Occupancy Classification"]||"").toLowerCase();return(N.includes("hospital")||N.includes("health"))&&(g+=10),N.includes("office")&&(g+=5),(N.includes("school")||N.includes("education"))&&(g+=5),Math.min(100,g)},_=u=>u<30?"LOW":u<60?"MEDIUM":"HIGH";if(j.useEffect(()=>{if(!t||!s)return;const u=new Set(s.map(N=>String(N["Registration Number"]||"").trim())),b=t.map(N=>({...N,reg_key:String(N["Registration Number"]||"").trim(),has_epc:u.has(String(N["Registration Number"]||"").trim()),compliance_status:u.has(String(N["Registration Number"]||"").trim())?"COMPLIANT (EPC ISSUED)":"NON-COMPLIANT (NO EPC)",City:d(N.City),Province:d(N.Province),"Occupancy Classification":d(N["Occupancy Classification"]),floors_num:m(N["No. of Floors"])||0,"Grid Usage":m(N["Grid Usage"])||0,"Gas Usage":m(N["Gas Usage"])||0,"Liquid Fuel Usage":m(N["Liquid Fuel Usage"])||0,"Renewable Usage":m(N["Renewable Usage"])||0,smart_metered_flag:String(N["Is Smart Metered?"]||"").toLowerCase().includes("yes")})).map(N=>({...N,risk_score:p(N),risk_category:_(p(N))}));l(b),n(b)},[t,s]),j.useEffect(()=>{if(!i)return;let u=i;if(r){const g=r.toLowerCase();u=u.filter(b=>String(b.reg_key).toLowerCase().includes(g)||String(b.City).toLowerCase().includes(g)||String(b.Province).toLowerCase().includes(g))}c!=="ALL"&&(u=u.filter(g=>g.risk_category===c)),h!=="ALL"&&(u=u.filter(g=>g.compliance_status===h)),n(u)},[r,c,h,i]),!i)return e.jsx("div",{className:"loading",children:"Processing compliance data..."});const y=i.length,S=i.filter(u=>u.has_epc).length,E=y-S,R=(S/y*100).toFixed(1),f=()=>{if(o.length===0)return;const u=[Object.keys(o[0]).join(","),...o.map(A=>Object.values(A).map(T=>`"${T}"`).join(","))].join(`
`),g=new Blob([u],{type:"text/csv"}),b=window.URL.createObjectURL(g),N=document.createElement("a");N.href=b,N.download="Building_Compliance_Export.csv",N.click()};return e.jsxs("div",{className:"cr-batch-container",children:[e.jsx("h2",{children:"üìä Batch Compliance Analysis"}),e.jsxs("div",{className:"cr-metrics",children:[e.jsxs("div",{className:"cr-metric-card",children:[e.jsx("div",{className:"metric-label",children:"Total Buildings"}),e.jsx("div",{className:"metric-value",children:y})]}),e.jsxs("div",{className:"cr-metric-card compliant",children:[e.jsx("div",{className:"metric-label",children:"Compliant"}),e.jsx("div",{className:"metric-value",children:S})]}),e.jsxs("div",{className:"cr-metric-card non-compliant",children:[e.jsx("div",{className:"metric-label",children:"Non-Compliant"}),e.jsx("div",{className:"metric-value",children:E})]}),e.jsxs("div",{className:"cr-metric-card",children:[e.jsx("div",{className:"metric-label",children:"Compliance Rate"}),e.jsxs("div",{className:"metric-value",children:[R,"%"]})]})]}),e.jsxs("div",{className:"cr-filters",children:[e.jsx("input",{type:"text",placeholder:"Search by Registration / City / Province",value:r,onChange:u=>a(u.target.value),className:"cr-search-input"}),e.jsxs("select",{value:c,onChange:u=>v(u.target.value),className:"cr-filter-select",children:[e.jsx("option",{value:"ALL",children:"All Risk Levels"}),e.jsx("option",{value:"LOW",children:"LOW"}),e.jsx("option",{value:"MEDIUM",children:"MEDIUM"}),e.jsx("option",{value:"HIGH",children:"HIGH"})]}),e.jsxs("select",{value:h,onChange:u=>x(u.target.value),className:"cr-filter-select",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"COMPLIANT (EPC ISSUED)",children:"Compliant"}),e.jsx("option",{value:"NON-COMPLIANT (NO EPC)",children:"Non-Compliant"})]}),e.jsx("button",{onClick:f,className:"cr-export-btn",children:"üì• Export CSV"})]}),e.jsxs("div",{className:"cr-table-container",children:[e.jsxs("p",{className:"cr-result-count",children:["Showing ",e.jsx("strong",{children:o.length})," of ",e.jsx("strong",{children:y})," buildings"]}),e.jsxs("table",{className:"cr-results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Registration"}),e.jsx("th",{children:"City"}),e.jsx("th",{children:"Province"}),e.jsx("th",{children:"Occupancy"}),e.jsx("th",{children:"Floors"}),e.jsx("th",{children:"Risk Score"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:o.sort((u,g)=>g.risk_score-u.risk_score).slice(0,100).map((u,g)=>e.jsxs("tr",{children:[e.jsx("td",{children:u.reg_key}),e.jsx("td",{children:u.City}),e.jsx("td",{children:u.Province}),e.jsx("td",{children:u["Occupancy Classification"]}),e.jsx("td",{children:u.floors_num||"N/A"}),e.jsx("td",{children:e.jsx("strong",{children:u.risk_score})}),e.jsx("td",{children:e.jsx("span",{className:`risk-badge risk-${u.risk_category.toLowerCase()}`,children:u.risk_category})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${u.has_epc?"compliant":"non-compliant"}`,children:u.has_epc?"‚úì":"‚úó"})})]},g))})]})]}),e.jsx(_e,{processedData:i}),e.jsx(ke,{processedData:i}),e.jsx(we,{processedData:i})]})}function _e({processedData:t}){const s=[{name:`COMPLIANT
(EPC ISSUED)`,count:t.filter(a=>a.has_epc).length},{name:`NON-COMPLIANT
(NO EPC)`,count:t.filter(a=>!a.has_epc).length}],i=[{name:"LOW",count:t.filter(a=>a.risk_category==="LOW").length},{name:"MEDIUM",count:t.filter(a=>a.risk_category==="MEDIUM").length},{name:"HIGH",count:t.filter(a=>a.risk_category==="HIGH").length}],l={};t.forEach(a=>{l[a.Province]||(l[a.Province]={compliant:0,total:0}),l[a.Province].total++,a.has_epc&&l[a.Province].compliant++});const o=Object.entries(l).map(([a,c])=>({name:a,rate:parseFloat((c.compliant/c.total*100).toFixed(1))})).sort((a,c)=>c.rate-a.rate),n=["#667eea","#764ba2"],r=["#28a745","#ffc107","#dc3545"];return e.jsxs("div",{className:"cr-charts-section",children:[e.jsx("h3",{children:"üìä Charts"}),e.jsxs("div",{className:"cr-charts-grid",children:[e.jsxs("div",{className:"cr-chart-container",children:[e.jsx("h4",{children:"Compliance Status Distribution"}),e.jsx(q,{width:"100%",height:300,children:e.jsxs(H,{data:s,children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name"}),e.jsx(K,{}),e.jsx(X,{}),e.jsx(Z,{dataKey:"count",fill:"#667eea",children:s.map((a,c)=>e.jsx(se,{fill:n[c]},`cell-${c}`))})]})})]}),e.jsxs("div",{className:"cr-chart-container",children:[e.jsx("h4",{children:"Rule-Based Risk Category Distribution"}),e.jsx(q,{width:"100%",height:300,children:e.jsxs(H,{data:i,children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name"}),e.jsx(K,{}),e.jsx(X,{}),e.jsx(Z,{dataKey:"count",fill:"#667eea",children:i.map((a,c)=>e.jsx(se,{fill:r[c]},`cell-${c}`))})]})})]})]}),e.jsxs("div",{className:"cr-chart-container-full",children:[e.jsx("h4",{children:"Compliance Rate by Province (%)"}),e.jsx(q,{width:"100%",height:350,children:e.jsxs(H,{data:o,children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(K,{}),e.jsx(X,{}),e.jsx(Z,{dataKey:"rate",fill:"#667eea"})]})})]})]})}function ke({processedData:t}){const s=G.useRef(null),[i,l]=G.useState(null),o={gauteng:[-26.2708,28.1123],"kwazulu-natal":[-29.8587,31.0218],"western cape":[-33.9249,18.4241],"eastern cape":[-32.2968,26.4194],"free state":[-29.0852,26.1596],limpopo:[-23.4013,29.4179],mpumalanga:[-25.5653,30.5279],"north west":[-26.6639,25.2838],"northern cape":[-29.0467,21.8569]};return G.useEffect(()=>{if(!s.current)return;const n=J.map(s.current).setView([-30.5595,22.9375],5);J.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Leaflet | OpenStreetMap contributors"}).addTo(n);const r={};return t.forEach(a=>{r[a.Province]||(r[a.Province]=0),r[a.Province]++}),Object.entries(r).forEach(([a,c])=>{const v=o[a.toLowerCase()];if(v){const h=Math.min(30,5+c/50);J.circleMarker(v,{radius:h,fillColor:"#667eea",color:"#667eea",weight:2,opacity:.8,fillOpacity:.7}).bindPopup(`${a.toUpperCase()} | Buildings: ${c}`).addTo(n)}}),l(n),()=>{n.remove()}},[t]),e.jsxs("div",{className:"cr-map-section",children:[e.jsx("h3",{children:"üó∫Ô∏è Map Dashboard (South Africa)"}),e.jsx("div",{ref:s,className:"cr-map-container"})]})}function we({processedData:t}){const s=[],i={};t.forEach(c=>{i[c.Province]||(i[c.Province]={compliant:0,total:0}),i[c.Province].total++,c.has_epc&&i[c.Province].compliant++});const l=Object.entries(i).sort((c,v)=>c[1].compliant/c[1].total*100-v[1].compliant/v[1].total*100)[0];if(l){const c=(l[1].compliant/l[1].total*100).toFixed(1);s.push(`Increase inspections in '${l[0]}' (compliance rate: ${c}%).`)}const o=t.filter(c=>c.risk_category==="HIGH").length;s.push(`Prioritize audits for HIGH risk buildings: ${o} flagged.`);const n=(t.filter(c=>c.smart_metered_flag).length/t.length*100).toFixed(1);s.push(`Promote smart metering rollout (current smart-meter rate: ${n}%).`);const r={};t.forEach(c=>{r[c["Occupancy Classification"]]||(r[c["Occupancy Classification"]]={compliant:0,total:0}),r[c["Occupancy Classification"]].total++,c.has_epc&&r[c["Occupancy Classification"]].compliant++});const a=Object.entries(r).sort((c,v)=>c[1].compliant/c[1].total*100-v[1].compliant/v[1].total*100)[0];if(a){const c=(a[1].compliant/a[1].total*100).toFixed(1);s.push(`Target enforcement for '${a[0]}' buildings (compliance rate: ${c}%).`)}return e.jsxs("div",{className:"cr-recommendations-section",children:[e.jsx("h3",{children:"üìå Auto-Generated Policy Recommendations"}),e.jsx("div",{className:"cr-recommendations-list",children:s.map((c,v)=>e.jsxs("div",{className:"cr-recommendation-item",children:["‚úì ",c]},v))})]})}function Ce(){const[t,s]=j.useState(!0),[i,l]=j.useState(null),[o,n]=j.useState(null),[r,a]=j.useState(null),c=D(),v=()=>{s(!t)},h=d=>{l(d),setTimeout(()=>{const m=document.getElementById("results-section");m&&m.scrollIntoView({behavior:"smooth"})},100)},x=d=>{n(d.registry),a(d.epc),setTimeout(()=>{const m=document.getElementById("results-section");m&&m.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"bc-main-container",children:[e.jsx(L,{onMenuToggle:v,currentPage:c.pathname}),e.jsx(W,{isOpen:t}),e.jsx("main",{className:"bc-main-content",children:e.jsx("div",{className:"bc-centered-container",children:e.jsxs("section",{className:"bc-section",children:[e.jsx(re,{onClassify:h,onBatchDataLoaded:x}),(i||o&&r)&&e.jsx("div",{id:"results-section",children:e.jsx(te,{classification:i==null?void 0:i.classification,probabilities:i==null?void 0:i.probabilities,formData:i==null?void 0:i.formData,registryData:o,epcData:r})})]})})})]})}function Se(){const[t,s]=j.useState(!0),[i,l]=j.useState(null),[o,n]=j.useState(null),r=D(),a=()=>{s(!t)},c=v=>{l(v.registry),n(v.epc),setTimeout(()=>{const h=document.getElementById("results-section");h&&h.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"bc-main-container",children:[e.jsx(L,{onMenuToggle:a,currentPage:r.pathname}),e.jsx(W,{isOpen:t}),e.jsx("main",{className:"bc-main-content",children:e.jsx("div",{className:"bc-centered-container",children:e.jsxs("section",{className:"bc-section",children:[e.jsx("h1",{style:{color:"#333",marginBottom:"2rem"},children:"Batch Compliance Analysis"}),e.jsx(re,{onClassify:()=>{},onBatchDataLoaded:c,batchModeOnly:!0}),i&&o&&e.jsx("div",{id:"results-section",children:e.jsx(te,{registryData:i,epcData:o})})]})})})]})}function Ee({onDetect:t}){const[s,i]=j.useState({energy_per_m2:80,fuel_intensity:30,electricity_intensity:120}),[l,o]=j.useState(!1),[n,r]=j.useState(""),a=x=>{const{name:d,value:m}=x.target;if(m===""){i(_=>({..._,[d]:0})),r("");return}const p=parseFloat(m);if(!isNaN(p)&&isFinite(p)){const y={energy_per_m2:{min:0,max:300},fuel_intensity:{min:0,max:150},electricity_intensity:{min:0,max:400}}[d]||{min:0,max:1e3},S=Math.max(y.min,Math.min(y.max,p));i(E=>({...E,[d]:S})),r("")}},c=(x,d)=>{i(m=>({...m,[x]:d})),r("")},v=async x=>{var d,m;x.preventDefault(),o(!0),r("");try{const p=await O.post("https://13.49.72.166/api/anomaly-detect",{energy_per_m2:parseFloat(s.energy_per_m2),fuel_intensity:parseFloat(s.fuel_intensity),electricity_intensity:parseFloat(s.electricity_intensity)});t(p.data)}catch(p){r(((m=(d=p.response)==null?void 0:d.data)==null?void 0:m.error)||"Error during anomaly detection. Please try again."),console.error("Anomaly detection error:",p)}finally{o(!1)}},h=()=>{i({energy_per_m2:Math.random()*200+20,fuel_intensity:Math.random()*80+10,electricity_intensity:Math.random()*250+50}),r("")};return e.jsxs("form",{onSubmit:v,className:"ad-form-container",children:[e.jsx("h2",{children:"üîç Energy Anomaly Detector"}),e.jsx("p",{className:"form-description",children:"Enter building energy metrics to detect unusual consumption patterns using machine learning models."}),n&&e.jsx("div",{className:"form-error",children:n}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üìä Energy Metrics"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Energy per m¬≤ (kWh/m¬≤)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"energy_per_m2",value:Number(s.energy_per_m2).toFixed(1),onChange:a,onBlur:x=>{const d=parseFloat(x.target.value);isNaN(d)&&i(m=>({...m,energy_per_m2:0}))},min:"0",max:"300",step:"0.1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"energy_per_m2",min:"0",max:"300",step:"0.1",value:s.energy_per_m2,onChange:x=>c("energy_per_m2",parseFloat(x.target.value)),className:"slider"}),e.jsx("span",{className:"slider-value",children:Number(s.energy_per_m2).toFixed(1)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fuel Intensity (kWh/m¬≤)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"fuel_intensity",value:Number(s.fuel_intensity).toFixed(1),onChange:a,onBlur:x=>{const d=parseFloat(x.target.value);isNaN(d)&&i(m=>({...m,fuel_intensity:0}))},min:"0",max:"150",step:"0.1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"fuel_intensity",min:"0",max:"150",step:"0.1",value:s.fuel_intensity,onChange:x=>c("fuel_intensity",parseFloat(x.target.value)),className:"slider"}),e.jsx("span",{className:"slider-value",children:Number(s.fuel_intensity).toFixed(1)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electricity Intensity (kWh/m¬≤)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"electricity_intensity",value:Number(s.electricity_intensity).toFixed(1),onChange:a,onBlur:x=>{const d=parseFloat(x.target.value);isNaN(d)&&i(m=>({...m,electricity_intensity:0}))},min:"0",max:"400",step:"0.1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"electricity_intensity",min:"0",max:"400",step:"0.1",value:s.electricity_intensity,onChange:x=>c("electricity_intensity",parseFloat(x.target.value)),className:"slider"}),e.jsx("span",{className:"slider-value",children:Number(s.electricity_intensity).toFixed(1)})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",disabled:l,className:"submit-btn",children:l?"üîÑ Analyzing...":"üöÄ Detect Anomaly"}),e.jsx("button",{type:"button",onClick:h,className:"randomize-btn",disabled:l,children:"üé≤ Randomize"})]}),e.jsxs("div",{className:"form-hints",children:[e.jsx("p",{children:e.jsx("strong",{children:"üí° Hints:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Typical energy_per_m¬≤: 50-150 kWh/m¬≤"}),e.jsx("li",{children:"Typical fuel_intensity: 10-60 kWh/m¬≤"}),e.jsx("li",{children:"Typical electricity_intensity: 80-200 kWh/m¬≤"})]})]})]})}function Fe({results:t}){if(!t)return null;const s=t.isolation_forest_result,i=t.dbscan_result,l=t.recommendations||[],o=t.input||{},n=s==="Anomaly",r=n?"anomaly":"normal";return e.jsxs("div",{className:"ad-results-container",children:[e.jsx("h3",{children:"üîç Anomaly Detection Results"}),e.jsxs("div",{className:"adr-input-section",children:[e.jsx("h4",{children:"Input Metrics"}),e.jsxs("div",{className:"adr-input-grid",children:[e.jsxs("div",{className:"adr-input-item",children:[e.jsx("span",{className:"input-label",children:"Energy per m¬≤"}),e.jsxs("span",{className:"input-value",children:[(o.energy_per_m2||0).toFixed(1)," kWh/m¬≤"]})]}),e.jsxs("div",{className:"adr-input-item",children:[e.jsx("span",{className:"input-label",children:"Fuel Intensity"}),e.jsxs("span",{className:"input-value",children:[(o.fuel_intensity||0).toFixed(1)," kWh/m¬≤"]})]}),e.jsxs("div",{className:"adr-input-item",children:[e.jsx("span",{className:"input-label",children:"Electricity Intensity"}),e.jsxs("span",{className:"input-value",children:[(o.electricity_intensity||0).toFixed(1)," kWh/m¬≤"]})]})]})]}),e.jsxs("div",{className:`adr-main-result ${r}`,children:[e.jsx("div",{className:"adr-status-icon",children:n?"‚ö†Ô∏è ANOMALY":"‚úÖ NORMAL"}),e.jsx("div",{className:"adr-status-message",children:n?"Unusual energy consumption pattern detected":"Building energy consumption is within normal range"})]}),e.jsxs("div",{className:"adr-models-section",children:[e.jsx("h4",{children:"üìä Model Predictions"}),e.jsxs("div",{className:"adr-model-result",children:[e.jsx("div",{className:"model-name",children:"Isolation Forest"}),e.jsx("div",{className:`model-prediction isolation-${s.toLowerCase()}`,children:s}),e.jsx("p",{className:"model-description",children:"Detects anomalies using tree-based isolation technique"})]}),e.jsxs("div",{className:"adr-model-result",children:[e.jsx("div",{className:"model-name",children:"DBSCAN"}),e.jsx("div",{className:`model-prediction dbscan-${i.toLowerCase()}`,children:i}),e.jsx("p",{className:"model-description",children:"Identifies outliers using density-based clustering"})]})]}),l.length>0&&e.jsxs("div",{className:"adr-recommendations",children:[e.jsx("h4",{children:"üí° Recommendations"}),e.jsx("ul",{className:"recommendations-list",children:l.map((a,c)=>e.jsx("li",{className:"recommendation-item",children:a},c))})]}),e.jsxs("div",{className:"adr-summary",children:[e.jsx("h4",{children:"üìà Analysis Summary"}),e.jsxs("div",{className:"summary-text",children:[e.jsx("p",{children:"Based on the analysis of three key energy metrics, this building has been evaluated using two independent anomaly detection algorithms:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Isolation Forest:"})," An ensemble method that isolates anomalies by randomly selecting features and split values."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"DBSCAN:"})," A density-based clustering algorithm that identifies core points, border points, and noise points."]})]}),e.jsx("p",{children:"Both methods combined provide robust detection of unusual energy consumption patterns that may indicate issues with building systems, inefficient operations, or data anomalies."})]})]})]})}function Me(){const[t,s]=j.useState(!0),[i,l]=j.useState(null),o=D(),n=()=>{s(!t)},r=a=>{l(a),setTimeout(()=>{const c=document.getElementById("results-section");c&&c.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"bc-main-container",children:[e.jsx(L,{onMenuToggle:n,currentPage:o.pathname}),e.jsx(W,{isOpen:t}),e.jsx("main",{className:"bc-main-content",children:e.jsx("div",{className:"bc-centered-container",children:e.jsxs("section",{className:"bc-section",children:[e.jsx(Ee,{onDetect:r}),i&&e.jsx("div",{id:"results-section",children:e.jsx(Fe,{results:i})})]})})})]})}function Pe({onAnalyze:t}){const[s,i]=j.useState({size:500,total_energy_consumption:5e4,grid_usage:4e4,renewable_usage:5e3,province:"gauteng"}),[l,o]=j.useState(!1),[n,r]=j.useState(""),a=["gauteng","western cape","kwazulu-natal","limpopo","mpumalanga","free state","north west","eastern cape","northern cape"],c=d=>{const{name:m,value:p}=d.target;if(p===""){i(y=>({...y,[m]:0})),r("");return}if(m==="province"){i(y=>({...y,[m]:p})),r("");return}const _=parseFloat(p);if(!isNaN(_)&&isFinite(_)){const S={size:{min:10,max:1e5},total_energy_consumption:{min:0,max:5e6},grid_usage:{min:0,max:5e6},renewable_usage:{min:0,max:5e6}}[m]||{min:0,max:1e6},E=Math.max(S.min,Math.min(S.max,_));i(R=>({...R,[m]:E})),r("")}},v=(d,m)=>{i(p=>({...p,[d]:m})),r("")},h=async d=>{var m,p;d.preventDefault(),o(!0),r("");try{const _=await O.post("https://13.49.72.166/api/renewable-energy-potential",{size:parseFloat(s.size),total_energy_consumption:parseFloat(s.total_energy_consumption),grid_usage:parseFloat(s.grid_usage),renewable_usage:parseFloat(s.renewable_usage),province:s.province});t(_.data)}catch(_){r(((p=(m=_.response)==null?void 0:m.data)==null?void 0:p.error)||"Error during analysis. Please try again."),console.error("Renewable energy analysis error:",_)}finally{o(!1)}},x=()=>{i({size:Math.floor(Math.random()*5e3)+200,total_energy_consumption:Math.floor(Math.random()*2e5)+2e4,grid_usage:Math.floor(Math.random()*15e4)+15e3,renewable_usage:Math.floor(Math.random()*1e4)+1e3,province:a[Math.floor(Math.random()*a.length)]}),r("")};return e.jsxs("form",{onSubmit:h,className:"re-form-container",children:[e.jsx("h2",{children:"‚òÄÔ∏è Renewable Energy Adoption Analyzer"}),e.jsx("p",{className:"form-description",children:"Analyze your building's potential for solar energy adoption and calculate financial viability."}),n&&e.jsx("div",{className:"form-error",children:n}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üè¢ Building Information"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Size (m¬≤)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"size",value:Number(s.size).toFixed(1),onChange:c,onBlur:d=>{const m=parseFloat(d.target.value);isNaN(m)&&i(p=>({...p,size:0}))},min:"10",max:"100000",step:"1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"size",min:"10",max:"10000",step:"10",value:s.size,onChange:d=>v("size",parseFloat(d.target.value)),className:"slider"}),e.jsxs("span",{className:"slider-value",children:[Number(s.size).toFixed(1)," m¬≤"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Province"}),e.jsx("select",{name:"province",value:s.province,onChange:c,className:"province-select",children:a.map(d=>e.jsx("option",{value:d,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"‚ö° Energy Consumption (Annual)"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Total Energy Consumption (kWh/year)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"total_energy_consumption",value:Number(s.total_energy_consumption).toFixed(1),onChange:c,onBlur:d=>{const m=parseFloat(d.target.value);isNaN(m)&&i(p=>({...p,total_energy_consumption:0}))},min:"0",max:"5000000",step:"1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"total_energy_consumption",min:"0",max:"500000",step:"5000",value:s.total_energy_consumption,onChange:d=>v("total_energy_consumption",parseFloat(d.target.value)),className:"slider"}),e.jsxs("span",{className:"slider-value",children:[(Number(s.total_energy_consumption)/1e3).toFixed(0),"k"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Grid Usage (kWh/year)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"grid_usage",value:Number(s.grid_usage).toFixed(1),onChange:c,onBlur:d=>{const m=parseFloat(d.target.value);isNaN(m)&&i(p=>({...p,grid_usage:0}))},min:"0",max:"5000000",step:"1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"grid_usage",min:"0",max:"500000",step:"5000",value:s.grid_usage,onChange:d=>v("grid_usage",parseFloat(d.target.value)),className:"slider"}),e.jsxs("span",{className:"slider-value",children:[(Number(s.grid_usage)/1e3).toFixed(0),"k"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Renewable Usage (kWh/year)"}),e.jsxs("div",{className:"input-with-slider",children:[e.jsx("input",{type:"number",name:"renewable_usage",value:Number(s.renewable_usage).toFixed(1),onChange:c,onBlur:d=>{const m=parseFloat(d.target.value);isNaN(m)&&i(p=>({...p,renewable_usage:0}))},min:"0",max:"5000000",step:"1",inputMode:"decimal"}),e.jsx("input",{type:"range",name:"renewable_usage",min:"0",max:"500000",step:"5000",value:s.renewable_usage,onChange:d=>v("renewable_usage",parseFloat(d.target.value)),className:"slider"}),e.jsxs("span",{className:"slider-value",children:[(Number(s.renewable_usage)/1e3).toFixed(0),"k"]})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",disabled:l,className:"submit-btn",children:l?"üîÑ Analyzing...":"üöÄ Analyze Potential"}),e.jsx("button",{type:"button",onClick:x,className:"randomize-btn",disabled:l,children:"üé≤ Sample Data"})]})]})}function Re({results:t}){var n;if(!t)return null;const s=t.solar_analysis||{},i=t.prediction||{},l=t.input||{},o=i.is_solar_candidate;return e.jsxs("div",{className:"rer-container",children:[e.jsx("h3",{children:"‚òÄÔ∏è Solar Energy Potential Analysis"}),e.jsxs("div",{className:"rer-summary-cards",children:[e.jsxs("div",{className:"rer-card",children:[e.jsx("span",{className:"card-label",children:"Building Size"}),e.jsxs("span",{className:"card-value",children:[(l.building_size||0).toFixed(0)," m¬≤"]})]}),e.jsxs("div",{className:"rer-card",children:[e.jsx("span",{className:"card-label",children:"Province"}),e.jsx("span",{className:"card-value",children:(n=l.province)==null?void 0:n.toUpperCase()})]}),e.jsxs("div",{className:"rer-card",children:[e.jsx("span",{className:"card-label",children:"Total Energy"}),e.jsxs("span",{className:"card-value",children:[((l.total_energy_consumption||0)/1e3).toFixed(0),"k kWh"]})]}),e.jsxs("div",{className:"rer-card",children:[e.jsx("span",{className:"card-label",children:"Grid Usage"}),e.jsxs("span",{className:"card-value",children:[((l.grid_usage||0)/1e3).toFixed(0),"k kWh"]})]})]}),e.jsxs("div",{className:`rer-main-recommendation ${o?"candidate":"not-candidate"}`,children:[e.jsx("div",{className:"recommendation-icon",children:o?"‚úÖ":"‚ùå"}),e.jsx("div",{className:"recommendation-text",children:e.jsx("strong",{children:i.recommendation})})]}),i.reasons&&i.reasons.length>0&&e.jsxs("div",{className:"rer-reasons",children:[e.jsx("h4",{children:"üìã Key Factors"}),e.jsx("ul",{className:"reasons-list",children:i.reasons.map((r,a)=>e.jsx("li",{children:r},a))})]}),e.jsxs("div",{className:"rer-analysis-section",children:[e.jsx("h4",{children:"‚òÄÔ∏è Solar Potential"}),e.jsxs("div",{className:"rer-metrics-grid",children:[e.jsxs("div",{className:"rer-metric",children:[e.jsx("span",{className:"metric-label",children:"Solar Irradiance"}),e.jsx("span",{className:"metric-value",children:(s.solar_irradiance_kwh_m2_day||0).toFixed(1)}),e.jsx("span",{className:"metric-unit",children:"kWh/m¬≤/day"})]}),e.jsxs("div",{className:"rer-metric",children:[e.jsx("span",{className:"metric-label",children:"Roof Area"}),e.jsx("span",{className:"metric-value",children:(s.roof_area_m2||0).toFixed(0)}),e.jsx("span",{className:"metric-unit",children:"m¬≤"})]}),e.jsxs("div",{className:"rer-metric",children:[e.jsx("span",{className:"metric-label",children:"Solar Generation"}),e.jsxs("span",{className:"metric-value",children:[((s.solar_potential_kwh_year||0)/1e3).toFixed(0),"k"]}),e.jsx("span",{className:"metric-unit",children:"kWh/year"})]}),e.jsxs("div",{className:"rer-metric",children:[e.jsx("span",{className:"metric-label",children:"System Size"}),e.jsx("span",{className:"metric-value",children:(s.estimated_system_kw||0).toFixed(1)}),e.jsx("span",{className:"metric-unit",children:"kW"})]})]})]}),e.jsxs("div",{className:"rer-financial-section",children:[e.jsx("h4",{children:"üí∞ Financial Analysis"}),e.jsxs("div",{className:"rer-financial-metrics",children:[e.jsxs("div",{className:"financial-item",children:[e.jsx("span",{className:"item-label",children:"Installation Cost"}),e.jsxs("span",{className:"item-value",children:["R",(s.installation_cost_zar||0).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),e.jsxs("div",{className:"financial-item",children:[e.jsx("span",{className:"item-label",children:"Annual Savings"}),e.jsxs("span",{className:"item-value",children:["R",(s.annual_savings_zar||0).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),e.jsxs("div",{className:"financial-item highlight",children:[e.jsx("span",{className:"item-label",children:"Payback Period"}),e.jsx("span",{className:"item-value",children:(s.payback_years||0).toFixed(1)}),e.jsx("span",{className:"item-unit",children:"years"})]})]})]}),e.jsxs("div",{className:"rer-grid-section",children:[e.jsx("h4",{children:"üîå Grid Dependency"}),e.jsxs("div",{className:"grid-metrics",children:[e.jsxs("div",{className:"grid-metric",children:[e.jsx("span",{className:"metric-label",children:"Grid Dependency Ratio"}),e.jsxs("span",{className:"metric-value",children:[((s.grid_dependency_ratio||0)*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"grid-metric",children:[e.jsx("span",{className:"metric-label",children:"Renewable Gap to Cover"}),e.jsxs("span",{className:"metric-value",children:[((s.renewable_gap_kwh||0)/1e3).toFixed(0),"k"]}),e.jsx("span",{className:"metric-unit",children:"kWh/year"})]})]})]}),e.jsx("div",{className:"rer-info-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"üí° About This Analysis:"})," This assessment evaluates your building's suitability for solar energy based on: location (solar irradiance), building size, current energy consumption patterns, grid dependency, and financial viability. A quick payback period (typically under 6 years) indicates a strong business case for solar investment."]})})]})}function Ae(){const[t,s]=j.useState(!0),[i,l]=j.useState(null),o=D(),n=()=>{s(!t)},r=a=>{l(a),setTimeout(()=>{const c=document.getElementById("results-section");c&&c.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"bc-main-container",children:[e.jsx(L,{onMenuToggle:n,currentPage:o.pathname}),e.jsx(W,{isOpen:t}),e.jsx("main",{className:"bc-main-content",children:e.jsx("div",{className:"bc-centered-container",children:e.jsxs("section",{className:"bc-section",children:[e.jsx(Pe,{onAnalyze:r}),i&&e.jsx("div",{id:"results-section",children:e.jsx(Re,{results:i})})]})})})]})}function Be({onAnalysis:t}){const[s,i]=j.useState({baseline_energy:3e8,efficiency_improvement:10,tariff:2.45,emission_factor:.71}),[l,o]=j.useState(!1),[n,r]=j.useState(""),a=x=>{const{name:d,value:m,type:p}=x.target;i(_=>({..._,[d]:p==="number"?parseFloat(m):m})),r("")},c=(x,d)=>{i(m=>({...m,[x]:d})),r("")},v=async x=>{var d,m;x.preventDefault(),o(!0),r("");try{const p=await O.post("https://13.49.72.166/api/epc-analysis",{baseline_energy:s.baseline_energy,efficiency_improvement:s.efficiency_improvement,tariff:s.tariff,emission_factor:s.emission_factor});t({energy_saved:p.data.energy_saved,cost_savings:p.data.cost_savings,co2_avoided:p.data.co2_avoided,interpretation:p.data.interpretation})}catch(p){r(((m=(d=p.response)==null?void 0:d.data)==null?void 0:m.error)||"Error during analysis. Please try again."),console.error("Analysis error:",p)}finally{o(!1)}},h=()=>{const x=Math.random()*45e7+5e7,d=Math.round(x/1e6)*1e6,m=Math.random()*25+5,p=Math.random()*1.7+1.8,_=parseFloat(p.toFixed(2)),y=Math.random()*.3+.6,S=parseFloat(y.toFixed(2));i({baseline_energy:d,efficiency_improvement:m,tariff:_,emission_factor:S}),r("")};return e.jsxs("div",{className:"epc-form",children:[e.jsx("h2",{children:"üè¢ EPC Scenario Impact Analyzer"}),e.jsx("p",{className:"form-description",children:"Simulate how EPC efficiency improvements affect energy, cost, and emissions."}),n&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),n]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"‚ö° Energy Baseline & Efficiency"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Baseline Energy Consumption (kWh)",e.jsx("span",{className:"input-value",children:s.baseline_energy.toLocaleString()})]}),e.jsx("input",{type:"number",name:"baseline_energy",value:s.baseline_energy,onChange:a,min:"1000000",step:"1000000"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Efficiency Improvement (%)",e.jsxs("span",{className:"input-value",children:[s.efficiency_improvement.toFixed(1),"%"]})]}),e.jsx("input",{type:"range",name:"efficiency_improvement",min:"1",max:"40",step:"0.5",value:s.efficiency_improvement,onChange:x=>c("efficiency_improvement",parseFloat(x.target.value))})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üí∞ Economics & Environmental Impact"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Electricity Tariff (R/kWh)",e.jsxs("span",{className:"input-value",children:["R",s.tariff.toFixed(2)]})]}),e.jsx("input",{type:"number",name:"tariff",value:s.tariff,onChange:a,min:"1",step:"0.01"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["CO‚ÇÇ Emission Factor (kg/kWh)",e.jsx("span",{className:"input-value",children:s.emission_factor.toFixed(2)})]}),e.jsx("input",{type:"number",name:"emission_factor",value:s.emission_factor,onChange:a,min:"0.1",step:"0.01"})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"‚è≥ Analyzing...":"‚ñ∂ Run Analysis"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:h,disabled:l,children:"üé≤ Randomize Inputs"})]})]})]})}function Ie({results:t}){const[s,i]=j.useState({overview:!0,energy:!0,financial:!0,environmental:!0}),l=a=>{i(c=>({...c,[a]:!c[a]}))};if(!t)return null;const o=t.energy_saved,n=t.cost_savings,r=t.co2_avoided;return e.jsxs("div",{className:"epc-results",children:[e.jsx("h2",{children:"üìä Analysis Results"}),e.jsxs("div",{className:"metrics-container",children:[e.jsxs("div",{className:"metric-card energy-card",children:[e.jsx("div",{className:"metric-icon",children:"‚ö°"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"Energy Savings"}),e.jsxs("div",{className:"metric-value",children:[(o/1e6).toFixed(1),"M",e.jsx("span",{className:"metric-unit",children:"kWh"})]}),e.jsxs("div",{className:"metric-percentage",children:[(o/(3e8*.1)*100).toFixed(1),"% reduction"]})]})]}),e.jsxs("div",{className:"metric-card financial-card",children:[e.jsx("div",{className:"metric-icon",children:"üí∞"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"Cost Savings"}),e.jsxs("div",{className:"metric-value",children:["R",(n/1e6).toFixed(1),"M"]}),e.jsx("div",{className:"metric-percentage",children:"Annual savings"})]})]}),e.jsxs("div",{className:"metric-card environmental-card",children:[e.jsx("div",{className:"metric-icon",children:"üå±"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"CO‚ÇÇ Avoided"}),e.jsxs("div",{className:"metric-value",children:[r.toFixed(2),e.jsx("span",{className:"metric-unit",children:"tons"})]}),e.jsx("div",{className:"metric-percentage",children:"Annual CO‚ÇÇ reduction"})]})]})]}),e.jsxs("div",{className:"results-sections",children:[e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("overview"),children:[e.jsx("span",{className:"section-title",children:"üìã Executive Summary"}),e.jsx("span",{className:`section-toggle ${s.overview?"open":""}`,children:"‚ñº"})]}),s.overview&&e.jsx("div",{className:"section-content",children:e.jsx("div",{className:"interpretation-text",children:t.interpretation})})]}),e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("energy"),children:[e.jsx("span",{className:"section-title",children:"‚ö° Energy Impact Details"}),e.jsx("span",{className:`section-toggle ${s.energy?"open":""}`,children:"‚ñº"})]}),s.energy&&e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Total Energy Saved:"}),e.jsxs("span",{className:"detail-value",children:[(o/1e6).toFixed(2)," Million kWh"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Percentage Reduction:"}),e.jsxs("span",{className:"detail-value",children:[(o/(3e8*.1)*100).toFixed(2),"%"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"100%"}})})]})]}),e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("financial"),children:[e.jsx("span",{className:"section-title",children:"üí∞ Financial Benefits"}),e.jsx("span",{className:`section-toggle ${s.financial?"open":""}`,children:"‚ñº"})]}),s.financial&&e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Annual Cost Savings:"}),e.jsxs("span",{className:"detail-value",children:["R",(n/1e6).toFixed(2)," Million"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Per Unit (kWh):"}),e.jsxs("span",{className:"detail-value",children:["R",(n/o).toFixed(4)]})]})]})]}),e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("environmental"),children:[e.jsx("span",{className:"section-title",children:"üå± Environmental Impact"}),e.jsx("span",{className:`section-toggle ${s.environmental?"open":""}`,children:"‚ñº"})]}),s.environmental&&e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"CO‚ÇÇ Emissions Avoided:"}),e.jsxs("span",{className:"detail-value",children:[r.toFixed(2)," Metric Tons"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Equivalent to:"}),e.jsxs("span",{className:"detail-value",children:[Math.round(r*1e3/21)," trees planted"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill environmental",style:{width:"100%"}})})]})]})]})]})}function Oe(){const[t,s]=j.useState(!0),[i,l]=j.useState(null);ue();const o=n=>{l(n),setTimeout(()=>{var r;(r=document.getElementById("epc-results-section"))==null||r.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"epc-main-container",children:[e.jsx(L,{}),e.jsxs("div",{style:{display:"flex",flex:1},children:[e.jsx(W,{open:t,setOpen:s}),e.jsx("div",{className:"epc-main-content",children:e.jsxs("div",{className:"epc-container",children:[e.jsx(Be,{onAnalysis:o}),i&&e.jsx("div",{id:"epc-results-section",children:e.jsx(Ie,{results:i})})]})})]})]})}function Le({onPrediction:t}){const[s,i]=j.useState({floor_area:1200,year_built:2005,no_floors:3,epc_rating:4,insulation_level:.6,hvac_efficiency:.7}),[l,o]=j.useState(!1),[n,r]=j.useState(""),a=(h,x)=>{i(d=>({...d,[h]:x})),r("")},c=async h=>{var x,d;h.preventDefault(),o(!0),r("");try{const m=await O.post("https://13.49.72.166/api/energy-efficiency",{floor_area:s.floor_area,year_built:s.year_built,no_floors:s.no_floors,epc_rating:s.epc_rating,insulation_level:s.insulation_level,hvac_efficiency:s.hvac_efficiency});t({baseline_energy:m.data.baseline_energy,improved_energy:m.data.improved_energy,energy_saved:m.data.energy_saved,cost_saved:m.data.cost_saved,carbon_saved:m.data.carbon_saved,interpretation:m.data.interpretation,epc_levels:m.data.epc_levels,predictions:m.data.predictions})}catch(m){r(((d=(x=m.response)==null?void 0:x.data)==null?void 0:d.error)||"Error during prediction. Please try again."),console.error("Prediction error:",m)}finally{o(!1)}},v=()=>{i({floor_area:Math.floor(Math.random()*4500)+500,year_built:Math.floor(Math.random()*63)+1960,no_floors:Math.floor(Math.random()*10)+1,epc_rating:Math.floor(Math.random()*7)+1,insulation_level:Math.random()*.7+.3,hvac_efficiency:Math.random()*.6+.4}),r("")};return e.jsxs("div",{className:"energy-efficiency-form",children:[e.jsx("h2",{children:"üèõÔ∏è Energy Efficiency Rating Prediction"}),e.jsx("p",{className:"form-description",children:"Predict building energy intensity and analyze efficiency improvements based on EPC ratings."}),n&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),n]}),e.jsxs("form",{onSubmit:c,className:"form-container",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"üè¢ Building Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Floor Area (m¬≤)",e.jsx("span",{className:"input-value",children:s.floor_area.toLocaleString()})]}),e.jsx("input",{type:"range",name:"floor_area",min:"100",max:"5000",step:"50",value:s.floor_area,onChange:h=>a("floor_area",parseFloat(h.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Year Built",e.jsx("span",{className:"input-value",children:s.year_built})]}),e.jsx("input",{type:"range",name:"year_built",min:"1960",max:"2023",step:"1",value:s.year_built,onChange:h=>a("year_built",parseInt(h.target.value))})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Number of Floors",e.jsx("span",{className:"input-value",children:s.no_floors})]}),e.jsx("input",{type:"range",name:"no_floors",min:"1",max:"15",step:"1",value:s.no_floors,onChange:h=>a("no_floors",parseInt(h.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["EPC Rating (1 = Best)",e.jsx("span",{className:"input-value",children:["A","B","C","D","E","F","G"][s.epc_rating-1]})]}),e.jsx("input",{type:"range",name:"epc_rating",min:"1",max:"7",step:"1",value:s.epc_rating,onChange:h=>a("epc_rating",parseInt(h.target.value))})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"‚ö° Performance & Efficiency"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Insulation Level",e.jsxs("span",{className:"input-value",children:[(s.insulation_level*100).toFixed(0),"%"]})]}),e.jsx("input",{type:"range",name:"insulation_level",min:"0",max:"1",step:"0.05",value:s.insulation_level,onChange:h=>a("insulation_level",parseFloat(h.target.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["HVAC Efficiency",e.jsxs("span",{className:"input-value",children:[(s.hvac_efficiency*100).toFixed(0),"%"]})]}),e.jsx("input",{type:"range",name:"hvac_efficiency",min:"0",max:"1",step:"0.05",value:s.hvac_efficiency,onChange:h=>a("hvac_efficiency",parseFloat(h.target.value))})]})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",onClick:c,disabled:l,children:l?"‚è≥ Predicting...":"‚ñ∂ Predict Energy Performance"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:v,disabled:l,children:"üé≤ Randomize Inputs"})]})]})}function We({prediction:t}){const[s,i]=j.useState({overview:!0,baseline:!0,savings:!0,scenario:!0}),l=d=>{i(m=>({...m,[d]:!m[d]}))};if(!t)return null;const o=t.baseline_energy,n=t.improved_energy,r=t.energy_saved,a=t.cost_saved,c=t.carbon_saved,v=t.epc_levels||[1,2,3,4,5,6,7],h=t.predictions||[],x=h.length>0?Math.max(...h):100;return e.jsxs("div",{className:"energy-efficiency-results",children:[e.jsx("h2",{children:"üìä Energy Efficiency Analysis Results"}),e.jsxs("div",{className:"metrics-container",children:[e.jsxs("div",{className:"metric-card baseline-card",children:[e.jsx("div",{className:"metric-icon",children:"üìà"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"Baseline Energy"}),e.jsxs("div",{className:"metric-value",children:[o.toFixed(2),e.jsx("span",{className:"metric-unit",children:"kWh"})]})]})]}),e.jsxs("div",{className:"metric-card improvement-card",children:[e.jsx("div",{className:"metric-icon",children:"‚¨áÔ∏è"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"At EPC 1"}),e.jsxs("div",{className:"metric-value",children:[n.toFixed(2),e.jsx("span",{className:"metric-unit",children:"kWh"})]}),e.jsxs("div",{className:"metric-percentage",children:[((1-n/o)*100).toFixed(1),"% reduction"]})]})]}),e.jsxs("div",{className:"metric-card savings-card",children:[e.jsx("div",{className:"metric-icon",children:"üí∞"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"Cost Savings"}),e.jsxs("div",{className:"metric-value",children:["R",a.toFixed(2)]}),e.jsx("div",{className:"metric-percentage",children:"Annual benefit"})]})]}),e.jsxs("div",{className:"metric-card environmental-card",children:[e.jsx("div",{className:"metric-icon",children:"üå±"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-label",children:"CO‚ÇÇ Avoided"}),e.jsxs("div",{className:"metric-value",children:[c.toFixed(2),e.jsx("span",{className:"metric-unit",children:"tons"})]})]})]})]}),e.jsxs("div",{className:"results-sections",children:[e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("overview"),children:[e.jsx("span",{className:"section-title",children:"üìã Executive Summary"}),e.jsx("span",{className:`section-toggle ${s.overview?"open":""}`,children:"‚ñº"})]}),s.overview&&e.jsx("div",{className:"section-content",children:e.jsx("div",{className:"interpretation-text",children:t.interpretation})})]}),e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("baseline"),children:[e.jsx("span",{className:"section-title",children:"üìà Baseline Analysis"}),e.jsx("span",{className:`section-toggle ${s.baseline?"open":""}`,children:"‚ñº"})]}),s.baseline&&e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Current Energy Intensity:"}),e.jsxs("span",{className:"detail-value",children:[o.toFixed(2)," kWh"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"If upgraded to EPC 1:"}),e.jsxs("span",{className:"detail-value",children:[n.toFixed(2)," kWh"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Potential Reduction:"}),e.jsxs("span",{className:"detail-value",children:[((1-n/o)*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"100%"}})})]})]}),e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("savings"),children:[e.jsx("span",{className:"section-title",children:"üí° Potential Savings"}),e.jsx("span",{className:`section-toggle ${s.savings?"open":""}`,children:"‚ñº"})]}),s.savings&&e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Energy Saved Annually:"}),e.jsxs("span",{className:"detail-value",children:[r.toFixed(2)," kWh"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Cost Savings:"}),e.jsxs("span",{className:"detail-value",children:["R",a.toFixed(2)]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"CO‚ÇÇ Emissions Avoided:"}),e.jsxs("span",{className:"detail-value",children:[c.toFixed(2)," metric tons"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Trees Equivalent:"}),e.jsxs("span",{className:"detail-value",children:[Math.round(c*47)," trees"]})]})]})]}),e.jsxs("div",{className:"result-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>l("scenario"),children:[e.jsx("span",{className:"section-title",children:"üìä EPC Scenario Analysis"}),e.jsx("span",{className:`section-toggle ${s.scenario?"open":""}`,children:"‚ñº"})]}),s.scenario&&e.jsxs("div",{className:"section-content",children:[e.jsx("div",{className:"scenario-chart",children:v.map((d,m)=>e.jsxs("div",{className:"chart-bar-container",children:[e.jsx("div",{className:"chart-bar",children:e.jsx("div",{className:"chart-bar-fill",style:{height:`${h[m]/x*100}%`}})}),e.jsx("div",{className:"chart-label",children:["A","B","C","D","E","F","G"][d-1]}),e.jsx("div",{className:"chart-value",children:h[m].toFixed(1)})]},d))}),e.jsx("p",{className:"scenario-description",children:"Energy intensity at different EPC rating levels. Lower ratings (A-C) show significant efficiency gains through building improvements."})]})]})]})]})}function Te(){const[t,s]=j.useState(!0),[i,l]=j.useState(null),o=n=>{l(n),setTimeout(()=>{var r;(r=document.getElementById("energy-efficiency-results-section"))==null||r.scrollIntoView({behavior:"smooth"})},100)};return e.jsxs("div",{className:"energy-efficiency-main-container",children:[e.jsx(L,{}),e.jsxs("div",{style:{display:"flex",flex:1},children:[e.jsx(W,{open:t,setOpen:s}),e.jsx("div",{className:"energy-efficiency-main-content",children:e.jsxs("div",{className:"energy-efficiency-container",children:[e.jsx(Le,{onPrediction:o}),i&&e.jsx("div",{id:"energy-efficiency-results-section",children:e.jsx(We,{prediction:i})})]})})]})]})}function ze(){return e.jsx(xe,{children:e.jsxs(pe,{children:[e.jsx(I,{path:"/",element:e.jsx(ve,{})}),e.jsx(I,{path:"/neafs",element:e.jsx(fe,{})}),e.jsx(I,{path:"/analytics/building-classification",element:e.jsx(Ce,{})}),e.jsx(I,{path:"/analytics/batch-compliance",element:e.jsx(Se,{})}),e.jsx(I,{path:"/analytics/anomaly-detection",element:e.jsx(Me,{})}),e.jsx(I,{path:"/analytics/renewable-energy",element:e.jsx(Ae,{})}),e.jsx(I,{path:"/analytics/epc-analysis",element:e.jsx(Oe,{})}),e.jsx(I,{path:"/energy-efficiency",element:e.jsx(Te,{})})]})})}je.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(ze,{})}));
